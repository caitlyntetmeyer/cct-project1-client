{"version":3,"sources":["app.js","auth/signin.js","auth/signup.js","auth/userlinks.js","create/create.js","products/products.js","shirts/shirts.js","authinterceptor.js","create.service.js","currentuser.js","products.service.js","sessiontoken.js","users.service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function() {\n\tvar app = angular.module('project1',\n\t\t['ui.router',\n\t\t'project1.auth.signup',\n\t\t'project1.auth.signin',\n\t\t'project1.products',\n\t\t'project1.create'\n\t\t]);\n\tfunction config($urlRouterProvider) {\n\t\t$urlRouterProvider.otherwise('/signin');\n\t}\n\tconfig.$inject = ['$urlRouterProvider'];\n\tapp.config(config);\n\tapp.constant('API_BASE', '//localhost:3000/api/');\n})();\n","// Signing in a User\n(function(){\n\tangular\n\t\t.module('project1.auth.signin', ['ui.router'])\n\t\t.config(signinConfig);\n\n\t\tfunction signinConfig($stateProvider) {\n\t\t\t$stateProvider\n\t\t\t\t.state('signin', {\n\t\t\t\t\turl: '/signin',\n\t\t\t\t\ttemplateUrl: '/components/auth/signin.html',\n\t\t\t\t\tcontroller: SignInController,\n\t\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\t\tbindToController: this\n\t\t\t\t});\n\t\t}\n\n\t\tsigninConfig.$inject = ['$stateProvider'];\n\n\t\t// UsersService is used throughout this application to gather or create data regarding a user:\n\t\tfunction SignInController($state, UsersService) { // The signin component uses $state and UsersService as dependencies.\n\t\t\tvar vm = this;\n\t\t\tvm.login = function() {\n\t\t\t\tUsersService.login(vm.email, vm.password).then(function(response){\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t$state.go('create');\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tSignInController.$inject = ['$state', \"UsersService\"];\n})(); \n","// This configuration (config) file is found in a single file to keep the components together.\n// The config and controller for each feature will use the .$inject directive from Angular to inject dependencies.\n(function(){\n\tangular\n\t\t.module('project1.auth.signup', ['ui.router'])\n\t\t.config(signupConfig);\n\n\t\tfunction signupConfig($stateProvider) { \n\t\t// $stateProvider is from ui-router and is the method through which url routing is handled.\n\t\t\t$stateProvider\n\t\t\t\t.state('signup', {\n\t\t\t\t\turl: '/signup',\n\t\t\t\t\t// defines this component as the state of signup and provides the url route\n\t\t\t\t\ttemplateUrl: '/components/auth/signup.html',\n\t\t\t\t\t// templateUrl is the html the component will use\n\t\t\t\t\tcontroller: SignUpController,\n\t\t\t\t\t// controller indicates which controller will dictate the behavior of this view\n\t\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\t\t// controllerAs creates an alias so a developer doesn’t have to type SignUpController.<function or object>\n\t\t\t\t\tbindToController: this\n\t\t\t\t\t// bindToController binds the scope of the view to the scope of this controller and eliminates the need to use $scope\n\t\t\t\t});\n\t\t}\n\n\t\tsignupConfig.$inject = ['$stateProvider'];\n\n\t\tfunction SignUpController($state, UsersService) {\n\t\t\tvar vm = this;\n\t\t\t// \"var vm = this\" is how the binding of the controller to the view is completed.\n\t\t\tvm.user = {};\n\t\t\t// \"vm.user = {}\" establishes an object to build the username and password inside.\n\t\t\tvm.message = \"Sign up for an account!\"\n\t\t\t// example of expressions and how vm and this scope work together\n\t\t\tvm.submit = function() {\n\t\t\t\tUsersService.create(vm.user)\n\t\t\t\t\t.then(function(response){\n\t\t\t\t// \"ng-model\" and \"ng-submit\" (not in this file) create the vm.user object that \"UserService.create\" uses to sign a new user up.\n\t\t\t\t// The .then is how the SignUpController handles the resolved promise and then routes the app to the \"define\" feature of project1.\n\t\t\t\t\tconsole.log(response); // displays response data in console\n\t\t\t\t\t$state.go('create');\n\t\t\t\t\t// $state.go(‘define’) is how ui-route changes from state (url) to other states.\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tSignUpController.$inject = ['$state', 'UsersService'];\n\t\t// SignUpController has $state and UsersService injected into it.\n})();\n","// This file will \"power\" the custom directive.\n(function() {\n\tangular.module('project1')\n\t.directive('userlinks',\n\t\tfunction() {\n\t\t\tUserLinksController.$inject = [ '$state', 'CurrentUser', 'SessionToken' ];\n\t\t\tfunction UserLinksController($state, CurrentUser, SessionToken) {\n\t\t\t\tvar vm = this;\n\t\t\t\tvm.user = function() {\n\t\t\t\t\treturn CurrentUser.get();\n\t\t\t\t};\n\n\t\t\t\tvm.signedIn = function() {\n\t\t\t\t\treturn !!(vm.user().id);\n\t\t\t\t};\n\n\t\t\t\tvm.logout = function() {\n\t\t\t\t\tCurrentUser.clear();\n\t\t\t\t\tSessionToken.clear();\n\t\t\t\t\t$state.go('signin');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Configure the directive:\n\t\t\treturn {\n\t\t\t\t// Create an isolated scope to isolate the data to a portion of the application:\n\t\t\t\tscope: {},\n\t\t\t\tcontroller: UserLinksController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: true,\n\t\t\t\ttemplateUrl: '/components/auth/userlinks.html'\n\t\t\t};\n\t\t});\n})();\n","// For 2nd sprint, change this file to create a product.\n\n(function() {\n\tangular.module('project1.create', [\n\t\t'ui.router'\n\t\t])\n\t.config(createConfig);\n\n\tfunction createConfig($stateProvider) {\n\n\t\t$stateProvider\n\t\t\t.state('create', {\n\t\t\t\turl: '/create',\n\t\t\t\ttemplateUrl: '/components/create/create.html',\n\t\t\t\tcontroller: createController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: this,\n\t\t\t\t// Resolve is built in to Angular as a function that executes code prior to going to that route:\n\t\t\t\tresolve: [\n\t\t\t\t\t// Run functions to ensure that a user's actually logged in:\n\t\t\t\t\t'SessionToken', '$q', '$state',\n\t\t\t\t\t// Above line: 3 things are injected. $q is Angular's way to build custom promises.\n\t\t\t\t\tfunction(SessionToken, $q, $state){\n\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\tconsole.log(SessionToken.get())\n\t\t\t\t\t\tif (SessionToken.get()){\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t$state.go('signin');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t})\n\t\t\t.state('create/update', {\n\t\t\t\turl: '/create/:id',\n\t\t\t\ttemplateUrl: '/components/create/update.html',\n\t\t\t\tcontroller: createController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: this,\n\t\t\t\tresolve: {\n\t\t\t\t\tgetSingleItem: function($stateParams, ProductsService){\n\t\t\t\t\t\treturn ProductsService.fetchOne($stateParams.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tcreateConfig.$inject = [ '$stateProvider' ];\n\n\tfunction createController( $state, createService, ProductsService ) {\n\t\tvar vm = this;\n\t\tvm.saved = false;\n\t\tvm.shirt = {};\n\t\tvm.updateShirt = ProductsService.getProduct();\n\t\tconsole.log(vm.updateShirt);\n\t\tvm.save = function() {\n\t\t\tconsole.log(vm.shirt);\n\t\t\tcreateService.save(vm.shirt)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvm.saved = true;\n\t\t\t\t\t$state.go('products')\n\t\t\t\t});\n\t\t};\n\t\tvm.update = function() {\n\t\t\tshirtToUpdate = {\n\t\t\t\ttitle: vm.updateShirt.title,\n\t\t\t\tdesc: vm.updateShirt.desc,\n\t\t\t\timage: vm.updateShirt.image,\n\t\t\t\t_id: vm.updateShirt._id\n\t\t\t}\n\t\t\tProductsService.updateShirt(shirtToUpdate)\n\t\t\t.then(function(){\n\t\t\t\t$state.go('products')\n\t\t\t})\n\t\t}\n\n\t}\n\tcreateController.$inject = ['$state', 'CreateService', 'ProductsService'];\n})();\n","(function(){\n\tangular.module('project1.products', [\n'ui.router'\n\t\t])\n\t.config(productsConfig);\n\t\n\tproductsConfig.$inject = ['$stateProvider'];\n\tfunction productsConfig($stateProvider) {\n\n\t\t$stateProvider\n\t\t.state('products', {\n\t\t\turl: '/products',\n\t\t\ttemplateUrl: '/components/products/products.html',\n\t\t\tcontroller: ProductsController,\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tbindToController: this,\n\t\t\tresolve: {\n\t\t\t\tgetUserShirts: [\n\t\t\t\t\t'ProductsService',\n\t\t\t\t\tfunction(ProductsService) {\n\t\t\t\t\t\tconsole.log(\"in the resolve\");\n\t\t\t\t\t\treturn ProductsService.fetch();\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t}\n\n\tProductsController.$inject = ['$state', 'ProductsService', 'CurrentUser'];\n\tfunction ProductsController($state, ProductsService, CurrentUser) {\n\t\tvar vm = this;\n\t\tvm.products = ProductsService.getProducts();\n\t\tconsole.log(vm.products);\n\t\tvm.deleteProduct = function(shirt) {\n\t\t\tProductsService.deleteProducts(shirt);\n\t\t};\n\t\t// Inside vm.updateProduct, $state.go has the route as the first argument, but the second argument is an object with an id property. This is how products.js knows which product to get so it can be updated.\n\t\tvm.updateProduct = function(shirt) {\n\t\t\t$state.go('create/update', { 'id': shirt._id });\n\t\t};\n\t\tvm.goCreate = function(){\n\t\t\t$state.go('create');\n\t\t};\n\t\tvm.signOut = function(){\n\t\t\tCurrentUser.clear();\n\t\t\t$state.go('signin');\n\t\t};\n\t}\n})();\n","// (function(){\n// \tangular.module('project1.shirts', [\n// \t\t'ui.router'\n// \t\t])\n// \t.config(shirtsConfig);\n\n// \tshirtsConfig.$inject = ['$stateProvider'];\n// \tfunction shirtsConfig($stateProvider) {\n\n// \t\t$stateProvider\n// \t\t\t.state('shirts', {\n// \t\t\t\turl: '/shirts',\n// \t\t\t\ttemplateUrl: '/components/shirts/shirts.html',\n// \t\t\t\tcontroller: ShirtsController,\n// \t\t\t\tcontrollerAs: 'ctrl',\n// \t\t\t\tbindToController: this//,\n// \t\t\t\t// resolve: {  \n// \t\t\t\t// \tgetUserDefinitions: [\n// \t\t\t\t// \t'DefineService',\n// \t\t\t\t// \tfunction(DefineService) {\n// \t\t\t\t// \t\treturn DefineService.fetch();\n// \t\t\t\t// \t}\n// \t\t\t\t// \t]\n// \t\t\t\t// }\n// \t\t\t})\n// // $stateParams.id (line 36) allows the application to pass the url and use that as a way to identify an individual workout. Notice the '/:id' in the .state('products/update' (line 28). This is the variable that is passed to $stateParams.id.\n// \t\t\t.state('shirts/update', {\n// \t\t\t\turl: '/shirts/:id',\n// \t\t\t\ttemplateUrl: '/components/shirts/product-update.html',\n// \t\t\t\tcontroller: ShirtsController,\n// \t\t\t\tcontrollerAs: 'ctrl',\n// \t\t\t\tbindToController: this,\n// // The two functions in the resolve (below) allow the route to have access to the data of the product being edited. The resolve is getting ALL user definitions of a shirt.\n// \t\t\t\tresolve: {\n// \t\t\t\t\tgetSingleProduct: function($stateParams, ShirtsService) {\n// // $stateParams.id (line 36) allows the application to pass the url and use that as a way to identify an individual workout. Notice the '/:id' in the .state('Products/update' (line 28). This is the variable that is passed to $stateParams.id.\n// \t\t\t\t\t\treturn ShirtsService.fetchOne($stateParams.id);\n// \t\t\t\t\t}//,\n\n// \t\t\t\t\t// getUserDefinitions: function(DefineService) {\n// \t\t\t\t\t// \treturn DefineService.fetch();\n// \t\t\t\t\t// }\n// \t\t\t\t}\n// \t\t\t});\n// \t}\n\n// \tShirtsController.$inject = ['$state'/*, 'DefineService'*/, 'ShirtsService'];\n// \tfunction ShirtsController($state/*, DefineService*/, ShirtsService) {\n// \t\tvar vm = this;\n// \t\tvm.saved = false;\n// \t\tvm.product = {};\n// \t\t// vm.userDefinitions = DefineService.getDefinitions();\n// \t\tvm.updateProduct = ShirtsService.getProduct();\n// \t\tvm.save = function() {\n// \t\t\tShirtsService.save(vm.product)\n// \t\t\t.then(function(){\n// \t\t\t\tvm.saved = true;\n// \t\t\t\t$state.go('history');\n// \t\t\t});\n// \t\t};\n\n// \t\t// Create an update function here\n// \t\tvm.updateSingleShirt = function() {\n// \t\t\tvar shirtToUpdate = {\n// \t\t\t\tid: vm.updateShirt.id,\n// \t\t\t\tdesc: vm.updateShirt.description,\n// \t\t\t\tresult: vm.updateShirt.result,\n// \t\t\t\tdef: vm.updateShirt.def \n// \t\t\t}\n// \t\t\tShirtsService.updateShirt(shirtToUpdate)\n// \t\t\t.then(function() {\n// \t\t\t\t$state.go('history');\n// \t\t\t});\n// \t\t};\n// \t}\n// })();\n","(function(){\n\tangular.module('project1')\n\t\t.factory('AuthInterceptor', ['SessionToken', 'API_BASE',\n\t\t\tfunction(SessionToken, API_BASE) {\n\t\t\t\treturn {\n\t\t\t\t\trequest: function(config) {\n\t\t\t\t\t\tvar token = SessionToken.get();\n\t\t\t\t\t\tif (token && config.url.indexOf(API_BASE) > -1) {\n\t\t\t\t\t\t\tconfig.headers['Authorization'] = token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn config;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}]);\n\n\t\tangular.module('project1')\n\t\t\t.config(['$httpProvider', function($httpProvider) {\n\t\t\t\treturn $httpProvider.interceptors.push('AuthInterceptor');\n\t\t\t}]);\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","(function(){\n\tangular.module('project1')\n\t\t.service('CreateService', CreateService);\n\t\tCreateService.$inject = ['$http', 'API_BASE'];\n\t\tfunction CreateService($http, API_BASE) {\n\t\t\tvar createService = this;\n\t\t\tcreateService.userShirts = [];\n\n\t\t\tcreateService.save = function(shirt) {\n\t\t\t\treturn $http.post(API_BASE + 'shirt', {\n\t\t\t\t\tshirt: shirt\n\n\t\t\t\t}).then(function(response){\n\t\t\t\t\tcreateService.userShirts.unshift(response.data);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tcreateService.fetch = function(shirt) {\n\t\t\t\treturn $http.get(API_BASE + 'shirt')\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tcreateService.userShirts = response.data;\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\tcreateService.getShirts = function() {\n\t\t\t\treturn createService.userShirts;\n\t\t\t};\n\n\t\t\tcreateService.update = function(shirt) {\n\t\t\t\treturn $http.put(API_BASE + 'shirt', {\n\t\t\t\t\tshirt: shirt\n\t\t\t\t});\n\t\t\t};\n\t\t}\n})();\n","(function() {\n\tangular.module('project1')\n\t\t.service('CurrentUser', [ '$window', function($window) {\n\t\t\tfunction CurrentUser() { // declaring the CurrentUser\n\t\t\t\tvar currUser = $window.localStorage.getItem('currentUser');\n\t\t\t\t// Check if there's a currUser. If so, and if the currUser is undefined, set the currentUser:\n\t\t\t\tif (currUser && currUser !== \"undefined\") { \n\t\t\t\t\tthis.currentUser = JSON.parse($window.localStorage.getItem('currentUser'));\n\t\t\t\t}\n\t\t\t}\n\t\t\tCurrentUser.prototype.set = function(user) { // attaching further functionality onto the prototype chain\n\t\t\t\tthis.currentUser = user;\n\t\t\t\t$window.localStorage.setItem('currentUser', JSON.stringify(user));\n\t\t\t};\n\t\t\tCurrentUser.prototype.get = function() { // attaching further functionality onto the prototype chain\n\t\t\t\treturn this.currentUser || {};\n\t\t\t};\n\t\t\tCurrentUser.prototype.clear = function() { // attaching further functionality onto the prototype chain\n\t\t\t\tthis.currentUser = undefined;\n\t\t\t\t$window.localStorage.removeItem('currentUser');\n\t\t\t};\n\t\t\tCurrentUser.prototype.isSignedIn = function() { // attaching further functionality onto the prototype chain\n\t\t\t\treturn !!this.get().id; // The !! ensures that isSignedIn flips the boolean correctly.\n\t\t\t};\n\t\t\treturn new CurrentUser();\n\t\t}]);\n})();\n","// 1. Create the service\n// 2. Inject the service into the controller\n// 3. Create the views needed for the controller\n// 4. Update app.js (or the configuration file)\n\n(function(){\n\tangular.module('project1')\n\t\t// 1. Create the service\n\t\t.service('ProductsService', ProductsService);\n\n\t\t// 2. Inject the service into the controller\n\t\tProductsService.$inject = ['$http', 'API_BASE','$sce'];\n\t\tfunction ProductsService($http, API_BASE,$sce) {\n\t\t\tvar productsService = this;\n\t\t\t// Next 2 lines are used to expose data to the rest of the application:\n\t\t\tproductsService.shirts = [];\n\t\t\tproductsService.individualProduct = {};\n\t\t\t// Save the product:\n\t\t\tproductsService.save = function(product) {\n\t\t\t\treturn $http.post(API_BASE + 'product', {\n\t\t\t\t\tproduct: product\n\t\t\t\t}).then(function(response){\n\t\t\t\t\tproductsService.shirts.push(response);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tproductsService.fetch = function(product) {\n\t\t\t\tconsole.log('DUH');\n\t\t\t\treturn $http.get(API_BASE + 'shirts')\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\tproductsService.shirts = response.data;\n\t\t\t\t\t\tproductsService.shirts.forEach((shirt,i)=>{\n\t\t\t\t\t\t\tproductsService.shirts[i].image=$sce.trustAsResourceUrl(shirt.image);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t};\n\t\t\t// .getProducts returns data types so they can be used in multiple controllers:\n\t\t\tproductsService.getProducts = function() {\n\t\t\t\tconsole.log(\"test\");\n\t\t\t\treturn productsService.shirts;\n\t\t\t};\n\n\t\t\tproductsService.deleteProducts = function(product) {\n\t\t\t\tvar productIndex = productsService.shirts.indexOf(product);\n\t\t\t\tproductsService.shirts.splice(productIndex, 1);\n\t\t\t\tvar deleteData = {product: product};\n\t\t\t\treturn $http({\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\turl: API_BASE + \"product\",\n\t\t\t\t\tdata: JSON.stringify(deleteData),\n\t\t\t\t\theaders: {\"Content-Type\": \"application/json\"}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tproductsService.fetchOne = function(shirt) {\n\t\t\t\tconsole.log(shirt);\n\t\t\t\treturn $http.get(API_BASE + 'shirts/' + shirt)\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\tproductsService.individualProduct = response.data;\n\t\t\t\t});\n\t\t\t};\n\t\t\t// .getProduct returns data types so they can be used in multiple controllers:\n\t\t\tproductsService.getProduct = function() {\n\t\t\t\treturn productsService.individualProduct;\n\t\t\t};\n\n\t\t\tproductsService.updateShirt = function(shirtToUpdate) {\n\t\t\t\tconsole.log(shirtToUpdate);\n\t\t\t\treturn $http.put(API_BASE + 'shirt', { shirt: shirtToUpdate });\n\t\t\t}\n\t\t}\n})();\n","(function(){\n\tangular.module('project1')\n\t\t.service('SessionToken', ['$window', function($window) {\n\t\t\tfunction SessionToken(){\n\t\t\t// declares and defines SessionToken\n\t\t\t\tthis.sessionToken = $window.localStorage.getItem('sessionToken');\n\t\t\t}\n\n\t\t\tSessionToken.prototype.set = function(token){\n\t\t\t// uses the .prototype to attach the function .set to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\tthis.sessionToken = token;\n\t\t\t\t$window.localStorage.setItem('sessionToken', token);\n\t\t\t};\n\n\t\t\tSessionToken.prototype.get = function(){\n\t\t\t// uses the .prototype to attach the function .get to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\treturn this.sessionToken;\n\t\t\t};\n\n\t\t\tSessionToken.prototype.clear = function() {\n\t\t\t// uses the .prototype to attach the function .clear to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\tthis.sessionToken = undefined;\n\t\t\t\t$window.localStorage.removeItem('sessionToken');\n\t\t\t};\n\t\t\treturn new SessionToken;\n\t\t}]);\n})();\n","// This file handles the http request to create and/or sign in a user.\n// Implements the design pattern Dependency Injection (DI)\n(function(){\n\tangular.module('project1')\n\t\t.service('UsersService', [\n\t\t\t'$http', 'API_BASE', 'SessionToken',\n\t\t\tfunction($http, API_BASE, SessionToken) {\n\t\t\t\tfunction UsersService(){\n\n\t\t\t\t}\n\n\t\t\t\tUsersService.prototype.create = function(user) {\n\t\t\t\t\tconsole.log(user);\n\t\t\t\t\tvar userPromise = $http.post(API_BASE + 'signup', {\n\t\t\t\t\t\tuser: user\n\t\t\t\t\t});\n\n\t\t\t\t\tuserPromise.then(function(response){\n\t\t\t\t\t\tSessionToken.set(response.data.token);\n\t\t\t\t\t\t// CurrentUser.set(response.data.user);\n\t\t\t\t\t});\n\t\t\t\t\treturn userPromise;\n\t\t\t\t};\n\n\t\t\t\tUsersService.prototype.login = function(email, password) {\n\t\t\t\t\tvar loginPromise = $http.post(API_BASE + 'signin',{\n\t\t\t\t\t\temail: email,\n\t\t\t\t\t\tpassword: password\n\t\t\t\t\t});\n\n\t\t\t\t\tloginPromise.then(function(response){\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\tSessionToken.set(response.data.token);\n\t\t\t\t\t\t// CurrentUser.set(response.data.user);\n\t\t\t\t\t});\n\t\t\t\t\treturn loginPromise;\n\t\t\t\t};\n\t\t\t\treturn new UsersService();\n\t\t\t}]);\n})();\n"]}